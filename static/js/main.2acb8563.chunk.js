(this["webpackJsonpyandex-disk-client"]=this["webpackJsonpyandex-disk-client"]||[]).push([[0],{29:function(e,t,n){e.exports=n(43)},34:function(e,t,n){},36:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(25),o=n.n(i),c=(n(34),n(15)),l=n.n(c),s=n(20),u=n(8),d=n(9),h=n(11),m=n(10),f=n(12),p=(n(36),n(14)),k=n(5),v=n(26),E=n.n(v),b=(n(37),n(6)),y=n.n(b),j=(n(38),n(17)),O=n.n(j),g="https://oauth.yandex.ru/authorize?response_type=token&client_id=58d159d75dca404e89e361291e0ce147",x="https://cloud-api.yandex.net/v1/disk/resources?path=",w=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 Yandex \u0414\u0438\u0441\u043a Client"),r.a.createElement("p",null,"Yandex \u0414\u0438\u0441\u043a \u2014 \u044d\u0442\u043e \u0441\u0435\u0440\u0432\u0438\u0441 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f, \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0438 \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u0444\u0430\u0439\u043b\u043e\u0432."),r.a.createElement("p",null,"\u0414\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0444\u0430\u0439\u043b\u0430\u043c \u043d\u0430 \u0414\u0438\u0441\u043a\u0435 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 ",r.a.createElement("a",{href:g},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f")," \u0438 \u043f\u0440\u043e\u0439\u0434\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044e."))},C=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("a",{href:g,role:"button"},r.a.createElement(E.a,{raised:!0,className:"button-alternate"},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"))}}]),t}(r.a.Component),D=function(e){function t(e){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).call(this))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement(p.b,{to:"/"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),r.a.createElement(p.b,{to:"/client-disk"},"\u0414\u0438\u0441\u043a"),r.a.createElement(C,null)))}}]),t}(r.a.Component),_=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"\u0424\u0430\u0439\u043b\u044b:"),this.props.folder.map((function(t,n){return t&&r.a.createElement("span",{key:t},r.a.createElement(O.a,{icon:"keyboard_arrow_right"}),r.a.createElement("a",{href:e.props.folder.slice(0,n+1).join("/"),onClick:e.props.link},t))})))}}]),t}(r.a.Component),F=function(e){return e.disk.map((function(t){return r.a.createElement("div",{key:t.name},"dir"===t.type?r.a.createElement(b.ListItem,{onClick:function(){return e.folder(t.name)}},r.a.createElement(b.ListItemGraphic,{graphic:r.a.createElement(O.a,{icon:"folder"})}),r.a.createElement(b.ListItemText,{primaryText:t.name})):r.a.createElement(b.ListItem,{onClick:function(){return e.file(t.name)}},r.a.createElement(b.ListItemGraphic,{graphic:r.a.createElement(O.a,{icon:"insert_drive_file"})}),r.a.createElement(b.ListItemText,{primaryText:t.name})))}))},I=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={folder:[],disk:[]},e.arrayDisk=[],e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"getFolder",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.arrayDisk.length=0;var n=this.state.folder.join("/").replace("disk:/","")+"/",a=x+n+t+"&limit=10000",r=new Headers({Authorization:"OAuth "+this.props.token}),i={headers:r},o=function(){var t=Object(s.a)(l.a.mark((function t(){var n,r,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(a,i);case 2:return n=t.sent,t.next=5,n.json();case 5:(r=t.sent)._embedded.items.forEach((function(t,n){e.arrayDisk[n]=t})),o=r._embedded.path.split("/"),e.setState({disk:e.arrayDisk,folder:o});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();o()}},{key:"changeFolders",value:function(e){var t=this;e.preventDefault();var n=e.target.href.split("/");this.setState({folder:n},(function(){return t.getFolder("")}))}},{key:"getFile",value:function(e){var t=this,n="https://cloud-api.yandex.net/v1/disk/resources/download?path="+(this.state.folder.join("/").replace("disk:/","")+"/")+e,a={headers:new Headers({Authorization:"OAuth "+this.props.token})};(function(){var e=Object(s.a)(l.a.mark((function e(){var r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,a);case 2:return r=e.sent,e.next=5,r.json();case 5:i=e.sent,window.location=i.href,t.setState({download:i.href});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}},{key:"componentDidMount",value:function(){var e=this;this.setState({folder:["disk:/"]},(function(){return e.getFolder("")}))}},{key:"render",value:function(){return""===this.props.token?r.a.createElement("div",null,"\u0412\u044b \u043d\u0435 \u043f\u0440\u043e\u0448\u043b\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044e. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0414\u0438\u0441\u043a\u0443."):r.a.createElement("div",null,r.a.createElement(_,{folder:this.state.folder,link:this.changeFolders.bind(this)}),r.a.createElement(y.a,null,r.a.createElement(F,{disk:this.state.disk,folder:this.getFolder.bind(this),file:this.getFile.bind(this)})))}}]),t}(r.a.Component),L=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={token:""},e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=/access_token=([^&]+)/.exec(document.location.hash),t=e?e[1]:null;if(t)this.setState({token:t}),this.setCookie("token",t);else{var n=this.getCookie("token");if(n)return void this.setState({token:n})}}},{key:"setCookie",value:function(e,t){var n=new Date;n.setDate(n.getDate()+365);var a=e+"="+t+"; path=/; expires="+n;document.cookie=a}},{key:"getCookie",value:function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}},{key:"render",value:function(){var e=this.state.token;return r.a.createElement("div",null,r.a.createElement(D,null),r.a.createElement(k.c,null,r.a.createElement(k.a,{exact:!0,path:"/",render:function(){return r.a.createElement(w,{token:e})}}),r.a.createElement(k.a,{path:"/client-disk",render:function(){return""!==e?r.a.createElement(I,{token:e}):r.a.createElement("div",null,"\u0412\u044b \u043d\u0435 \u043f\u0440\u043e\u0448\u043b\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044e. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0414\u0438\u0441\u043a\u0443.")}})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(p.a,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.2acb8563.chunk.js.map